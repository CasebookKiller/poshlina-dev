import{r as t}from"./react-BjWDUbU-.js";import{_ as L,a as _,b as S,c as A}from"./vendor-CMn3VX1r.js";var F=function(r){return function(n,e){var u=t.useRef(!1);r(function(){return function(){u.current=!1}},[]),r(function(){if(!u.current)u.current=!0;else return n()},e)}},T=function(r){return typeof r=="function"};function I(r,n){if(r===n)return!0;for(var e=0;e<r.length;e++)if(!Object.is(r[e],n[e]))return!1;return!0}function U(r){var n=t.useRef(r);return n.current=r,n}var W=function(r){var n=U(r);t.useEffect(function(){return function(){n.current()}},[])},g=!!(typeof window<"u"&&window.document&&window.document.createElement);function p(r,n){if(g){if(!r)return n;var e;return T(r)?e=r():"current"in r?e=r.current:e=r,e}}var k=function(r){var n=function(e,u,s){var c=t.useRef(!1),o=t.useRef([]),l=t.useRef([]),a=t.useRef();r(function(){var f,R=Array.isArray(s)?s:[s],i=R.map(function(m){return p(m)});if(!c.current){c.current=!0,o.current=i,l.current=u,a.current=e();return}(i.length!==o.current.length||!I(o.current,i)||!I(l.current,u))&&((f=a.current)===null||f===void 0||f.call(a),o.current=i,l.current=u,a.current=e())}),W(function(){var f;(f=a.current)===null||f===void 0||f.call(a),c.current=!1})};return n},B=k(t.useEffect);function M(r,n){var e={},u=e.callback,s=L(e,["callback"]),c=_(t.useState(),2),o=c[0],l=c[1],a=_(t.useState(),2),f=a[0],R=a[1];return B(function(){var i=Array.isArray(r)?r:[r],m=i.map(function(v){return p(v)}).filter(Boolean);if(m.length){var w=new IntersectionObserver(function(v){var h,y;try{for(var E=S(v),d=E.next();!d.done;d=E.next()){var b=d.value;R(b.intersectionRatio),l(b.isIntersecting),u==null||u(b)}}catch(x){h={error:x}}finally{try{d&&!d.done&&(y=E.return)&&y.call(E)}finally{if(h)throw h.error}}},A(A({},s),{root:p(void 0)}));return m.forEach(function(v){return w.observe(v)}),function(){w.disconnect()}}},[void 0,void 0,u],r),[o,f]}var V=g?t.useLayoutEffect:t.useEffect,q=function(){var r=t.useRef(!1);return t.useEffect(function(){return r.current=!1,function(){r.current=!0}},[]),r};export{V as a,M as b,F as c,q as u};
