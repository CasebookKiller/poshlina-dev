var j={},v={};Object.defineProperty(v,"__esModule",{value:!0});v.compactObject=k;v.deprecated=K;var fe=v.detectBrowser=B;v.disableLog=z;v.disableWarnings=W;v.extractVersion=M;v.filterStats=H;v.log=F;v.walkStats=E;v.wrapPeerConnectionEvent=V;function J(e,t,n){return t=q(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){var t=N(e,"string");return S(t)=="symbol"?t:t+""}function N(e,t){if(S(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(S(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S(e){"@babel/helpers - typeof";return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(e)}var A=!0,T=!0;function M(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function V(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,f){if(s!==t)return i.apply(this,arguments);var d=function(u){var l=n(u);l&&(f.handleEvent?f.handleEvent(l):f(l))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(f,d),i.apply(this,[s,d])};var o=r.removeEventListener;r.removeEventListener=function(s,f){if(s!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(f))return o.apply(this,arguments);var d=this._eventMap[t].get(f);return this._eventMap[t].delete(f),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,d])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(f){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),f&&this.addEventListener(t,this["_on"+t]=f)},enumerable:!0,configurable:!0})}}function z(e){return typeof e!="boolean"?new Error("Argument type: "+S(e)+". Please use a boolean."):(A=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function W(e){return typeof e!="boolean"?new Error("Argument type: "+S(e)+". Please use a boolean."):(T=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function F(){if((typeof window>"u"?"undefined":S(window))==="object"){if(A)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function K(e,t){T&&console.warn(e+" is deprecated, please use "+t+" instead.")}function B(e){var t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;var n=e.navigator;if(n.userAgentData&&n.userAgentData.brands){var r=n.userAgentData.brands.find(function(i){return i.brand==="Chromium"});if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=M(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=M(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=M(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function O(e){return Object.prototype.toString.call(e)==="[object Object]"}function k(e){return O(e)?Object.keys(e).reduce(function(t,n){var r=O(e[n]),i=r?k(e[n]):e[n],o=r&&!Object.keys(i).length;return i===void 0||o?t:Object.assign(t,J({},n,i))},{}):e}function E(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(function(r){r.endsWith("Id")?E(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(function(i){E(e,e.get(i),n)})}))}function H(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;var o=[];return e.forEach(function(s){s.type==="track"&&s.trackIdentifier===t.id&&o.push(s)}),o.forEach(function(s){e.forEach(function(f){f.type===r&&f.trackId===s.id&&E(e,f,i)})}),i}Object.defineProperty(j,"__esModule",{value:!0});var de=j.shimGetUserMedia=Y,Q=X(v);function U(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(U=function(i){return i?n:t})(e)}function X(e,t){if(e&&e.__esModule)return e;if(e===null||b(e)!="object"&&typeof e!="function")return{default:e};var n=U(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function b(e){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(e)}var D=Q.log;function Y(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(a){if(b(a)!=="object"||a.mandatory||a.optional)return a;var u={};return Object.keys(a).forEach(function(l){if(!(l==="require"||l==="advanced"||l==="mediaSource")){var c=b(a[l])==="object"?a[l]:{ideal:a[l]};c.exact!==void 0&&typeof c.exact=="number"&&(c.min=c.max=c.exact);var C=function(p,y){return p?p+y.charAt(0).toUpperCase()+y.slice(1):y==="deviceId"?"sourceId":y};if(c.ideal!==void 0){u.optional=u.optional||[];var m={};typeof c.ideal=="number"?(m[C("min",l)]=c.ideal,u.optional.push(m),m={},m[C("max",l)]=c.ideal,u.optional.push(m)):(m[C("",l)]=c.ideal,u.optional.push(m))}c.exact!==void 0&&typeof c.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[C("",l)]=c.exact):["min","max"].forEach(function(h){c[h]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[C(h,l)]=c[h])})}}),a.advanced&&(u.optional=(u.optional||[]).concat(a.advanced)),u},i=function(a,u){if(t.version>=61)return u(a);if(a=JSON.parse(JSON.stringify(a)),a&&b(a.audio)==="object"){var l=function(p,y,R){y in p&&!(R in p)&&(p[R]=p[y],delete p[y])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&b(a.video)==="object"){var c=a.video.facingMode;c=c&&(b(c)==="object"?c:{ideal:c});var C=t.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!C)){delete a.video.facingMode;var m;if(c.exact==="environment"||c.ideal==="environment"?m=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(function(h){h=h.filter(function(y){return y.kind==="videoinput"});var p=h.find(function(y){return m.some(function(R){return y.label.toLowerCase().includes(R)})});return!p&&h.length&&m.includes("back")&&(p=h[h.length-1]),p&&(a.video.deviceId=c.exact?{exact:p.deviceId}:{ideal:p.deviceId}),a.video=r(a.video),D("chrome: "+JSON.stringify(a)),u(a)})}a.video=r(a.video)}return D("chrome: "+JSON.stringify(a)),u(a)},o=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},s=function(a,u,l){i(a,function(c){n.webkitGetUserMedia(c,u,function(C){l&&l(o(C))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){var f=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return i(d,function(a){return f(a).then(function(u){if(a.audio&&!u.getAudioTracks().length||a.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(function(l){l.stop()}),new DOMException("","NotFoundError");return u},function(u){return Promise.reject(o(u))})})}}}}var x={};Object.defineProperty(x,"__esModule",{value:!0});var le=x.shimGetUserMedia=ee,Z=w(v);function L(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(L=function(i){return i?n:t})(e)}function w(e,t){if(e&&e.__esModule)return e;if(e===null||P(e)!="object"&&typeof e!="function")return{default:e};var n=L(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function P(e){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(e)}function ee(e,t){var n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(d,a,u){Z.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(d).then(a,u)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(a,u,l){u in a&&!(l in a)&&(a[l]=a[u],delete a[u])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(d){return P(d)==="object"&&P(d.audio)==="object"&&(d=JSON.parse(JSON.stringify(d)),i(d.audio,"autoGainControl","mozAutoGainControl"),i(d.audio,"noiseSuppression","mozNoiseSuppression")),o(d)},r&&r.prototype.getSettings){var s=r.prototype.getSettings;r.prototype.getSettings=function(){var d=s.apply(this,arguments);return i(d,"mozAutoGainControl","autoGainControl"),i(d,"mozNoiseSuppression","noiseSuppression"),d}}if(r&&r.prototype.applyConstraints){var f=r.prototype.applyConstraints;r.prototype.applyConstraints=function(d){return this.kind==="audio"&&P(d)==="object"&&(d=JSON.parse(JSON.stringify(d)),i(d,"autoGainControl","mozAutoGainControl"),i(d,"noiseSuppression","mozNoiseSuppression")),f.apply(this,[d])}}}}var g={};Object.defineProperty(g,"__esModule",{value:!0});g.shimAudioContext=ce;g.shimCallbacksAPI=ie;g.shimConstraints=$;g.shimCreateOfferLegacy=ue;var pe=g.shimGetUserMedia=oe;g.shimLocalStreamsAPI=re;g.shimRTCIceServerUrls=ae;g.shimRemoteStreamsAPI=ne;g.shimTrackEventTransceiver=se;var I=te(v);function G(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(G=function(i){return i?n:t})(e)}function te(e,t){if(e&&e.__esModule)return e;if(e===null||_(e)!="object"&&typeof e!="function")return{default:e};var n=G(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function _(e){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(e)}function re(e){if(!(_(e)!=="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){var i=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(function(o){return t.call(i,o,r)}),r.getVideoTracks().forEach(function(o){return t.call(i,o,r)})},e.RTCPeerConnection.prototype.addTrack=function(r){for(var i=this,o=arguments.length,s=new Array(o>1?o-1:0),f=1;f<o;f++)s[f-1]=arguments[f];return s&&s.forEach(function(d){i._localStreams?i._localStreams.includes(d)||i._localStreams.push(d):i._localStreams=[d]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){var i=this;this._localStreams||(this._localStreams=[]);var o=this._localStreams.indexOf(r);if(o!==-1){this._localStreams.splice(o,1);var s=r.getTracks();this.getSenders().forEach(function(f){s.includes(f.track)&&i.removeTrack(f)})}})}}function ne(e){if(!(_(e)!=="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(r){var i=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(function(s){if(i._remoteStreams||(i._remoteStreams=[]),!i._remoteStreams.includes(s)){i._remoteStreams.push(s);var f=new Event("addstream");f.stream=s,i.dispatchEvent(f)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(function(o){if(r._remoteStreams||(r._remoteStreams=[]),!(r._remoteStreams.indexOf(o)>=0)){r._remoteStreams.push(o);var s=new Event("addstream");s.stream=o,r.dispatchEvent(s)}})}),t.apply(r,arguments)}}}function ie(e){if(!(_(e)!=="object"||!e.RTCPeerConnection)){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(a,u){var l=arguments.length>=2?arguments[2]:arguments[0],c=n.apply(this,[l]);return u?(c.then(a,u),Promise.resolve()):c},t.createAnswer=function(a,u){var l=arguments.length>=2?arguments[2]:arguments[0],c=r.apply(this,[l]);return u?(c.then(a,u),Promise.resolve()):c};var f=function(a,u,l){var c=i.apply(this,[a]);return l?(c.then(u,l),Promise.resolve()):c};t.setLocalDescription=f,f=function(a,u,l){var c=o.apply(this,[a]);return l?(c.then(u,l),Promise.resolve()):c},t.setRemoteDescription=f,f=function(a,u,l){var c=s.apply(this,[a]);return l?(c.then(u,l),Promise.resolve()):c},t.addIceCandidate=f}}function oe(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(i){return r($(i))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(o,s,f){t.mediaDevices.getUserMedia(o).then(s,f)}).bind(t))}function $(e){return e&&e.video!==void 0?Object.assign({},e,{video:I.compactObject(e.video)}):e}function ae(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){for(var o=[],s=0;s<r.iceServers.length;s++){var f=r.iceServers[s];f.urls===void 0&&f.url?(I.deprecated("RTCIceServer.url","RTCIceServer.urls"),f=JSON.parse(JSON.stringify(f)),f.urls=f.url,delete f.url,o.push(f)):o.push(r.iceServers[s])}r.iceServers=o}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function se(e){_(e)==="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function ue(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);var i=this.getTransceivers().find(function(s){return s.receiver.track.kind==="audio"});r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);var o=this.getTransceivers().find(function(s){return s.receiver.track.kind==="video"});r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function ce(e){_(e)!=="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}export{le as a,de as b,fe as d,pe as s};
